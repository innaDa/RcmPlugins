<?php

$this->headScript()->appendFile(
    $this->basePath()
    . '/modules/rcm-brightcove-player/rcm-brightcove-player.js',
    'text/javascript'
);

$this->headScript()->appendFile(
    $this->basePath()
    . '/modules/rcm-brightcove-player/rcm-brightcove-functions.js',
    'text/javascript'
);

$this->headScript()->appendFile(
    $this->basePath() . '/modules/rcm-brightcove-player/player.js',
    'text/javascript'
);

$this->headLink()->appendStylesheet(
    $this->basePath() . '/modules/rcm-brightcove-player/style.css'
);


?>
<script>
    var bgReadToken = '<?= $config['rcmPlugin']['RcmBrightcovePlayer']['readToken']; ?>';
    var bgUrlToken = '<?= $config['rcmPlugin']['RcmBrightcovePlayer']['urlToken']; ?>';
</script>
<?php

if (($instanceConfig['type']) == 'single-embed') {
    require('single_player.phtml');
} elseif (($instanceConfig['type']) == 'multi-embed') {
    require('multi-player.phtml');
}
?>
<div style="display:none">
    <div ng-controller="PlayerEditCtrl"
         ng-init="init(<?php echo str_replace(
             '"',
             "'",
             json_encode($instanceConfig)
         ); ?> )">
        <form style="display:none" title="Brightcove Player Editor" novalidate
              class="RcmBrightcovePlayer">

            <div>
                <div ng-show="true">
                    <select
                        name="selection"
                        ng-model="selectedItem"
                        ng-init="selectedItem = selectedItem || items[0]"
                        data-selection="{{selectedItem.id}}"
                        ng-options="item as item.name for item in items">
                    </select>


                </div>
                <div class="selection"
                     ng-show="selectedItem.id == 'single-embed'">

                    <br>Choose video:<br>
                    <select
                        name="video"
                        ng-model="selectedVideos"
                        ng-options="video.name for video in videos">
                    </select>

                    <br>

                    <div class="singleVideo" style="display:none;">
                        {{selectedVideos.id}}
                    </div>
                    <br>
                    <img ng-src="{{selectedVideos.thumbnailURL}}"/>
                    <br>
                </div>
                <div class="selection"
                     ng-show="selectedItem.id == 'multi-embed'">
                    <br><br>

                    <div>

                        <ul id="sortable1"
                            class="droptrue connectedSortable"
                            >
                            <span style="padding: 5px;"><strong>Unselected
                                    Playlists</strong></span>
                            <li
                                style="height:20px;"
                                class="ui-state-default"
                                ng-repeat="playlist in unselectedPlaylist"
                                data-first-video="{{playlist.videoIds.0}}"
                                data-id="{{playlist.id}}"
                                >
                                {{playlist.name}}

                            </li>
                        </ul>

                        <ul
                            id="sortable2"

                            class="droptrue playlist-list">
                            <span style="padding: 5px;"><strong>Selected
                                    Playlists</strong></span>
                            <li
                                class="ui-state-highlight"
                                ng-repeat="playlist in selectedPlaylist"
                                data-first-video="{{playlist.videoIds.0}}"
                                data-id="{{playlist.id}}"
                                style="min-height: 15px"
                                >
                                {{playlist.name}}
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
            <br>
    </div>
    <div style="clear:both;"></div>
    </form>
</div>





